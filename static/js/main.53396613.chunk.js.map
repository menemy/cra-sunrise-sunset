{"version":3,"sources":["App.module.css","App.jsx","index.jsx"],"names":["module","exports","getPositionPromise","options","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","API_BASE","formatDayInterval","days","encodeURIComponent","formatTime","dateString","date","Date","parse","hour","getHours","minute","getMinutes","hourFormatted","minuteFormatted","parseMinutesBetween","firstDateString","secondDateString","firstDate","diff","Math","round","calcGradient","data","status","civil_twilight_begin_minutes","sunrise_minutes","sunset_minutes","civil_twilight_end_minutes","results","sunrise","sunset","civil_twilight_begin","civil_twilight_end","minutes","parseMinutes","Gradient","prevData","currObj","prevObj","React","useState","percent","setPercent","requestRef","useRef","previousTimeRef","startedTimeRef","animate","time","undefined","current","deltaTime","prevPercent","max","callback","requestAnimationFrame","useEffect","performance","now","cancelAnimationFrame","className","styles","bar","style","width","background","App","isLoading","setIsLoading","setData","error","setError","setDays","ref","a","coords","latitude","longitude","fetch","fetcher","json","response","message","fetchData","day_length","app","pre","header","setDate","getDate","getMonth","getFullYear","displayDate","seconds","hours","floor","formatInterval","type","button","onClick","currDays","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.53396613.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"bar\":\"App_bar__3KjH7\",\"header\":\"App_header__3ZZ1n\",\"pre\":\"App_pre__1O6Rm\",\"button\":\"App_button__13pio\"};","import React, { useState, useEffect, useRef } from 'react'\nimport styles from './App.module.css'\n\nconst getPositionPromise = (options) =>\n  new Promise((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(resolve, reject, options)\n  })\n\nconst API_BASE = 'https://api.sunrise-sunset.org/json'\n\nconst formatDayInterval = (days) => encodeURIComponent(`${days} day`)\nconst displayDate = (days) => {\n  const date = new Date()\n  date.setDate(date.getDate() + days)\n  return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`\n}\n\nconst formatInterval = (seconds) => {\n  if (!seconds) return ''\n  const hours = Math.floor(seconds / 3600)\n  const minutes = Math.floor((seconds % 3600) / 60)\n  return `${hours}:${minutes}`\n}\nconst formatTime = (dateString) => {\n  if (!dateString) return ''\n  const date = new Date(Date.parse(dateString))\n  const hour = date.getHours()\n  const minute = date.getMinutes()\n  const hourFormatted = hour < 10 ? `0${hour}` : hour\n  const minuteFormatted = minute < 10 ? `0${minute}` : minute\n  return `${hourFormatted}:${minuteFormatted}`\n}\nconst parseMinutes = (dateString) => {\n  const date = new Date(Date.parse(dateString))\n  const minutes = date.getMinutes()\n  const hours = date.getHours()\n  return 60 * hours + minutes\n}\nconst parseMinutesBetween = (firstDateString, secondDateString) => {\n  const firstDate = new Date(Date.parse(firstDateString))\n  const secondDate = new Date(Date.parse(secondDateString))\n  const diff = secondDate - firstDate\n  return Math.round(diff / 1000 / 60)\n}\nconst calcGradient = (data) => {\n  if (!data || typeof data.status === 'undefined') {\n    // initial animation\n    return {\n      civil_twilight_begin_minutes: 740,\n      sunrise_minutes: 740,\n      sunset_minutes: 740,\n      civil_twilight_end_minutes: 740,\n    }\n  }\n  /* eslint-disable camelcase */\n\n  const {\n    results: { sunrise, sunset, civil_twilight_begin, civil_twilight_end },\n  } = data\n  // It is possible that ending will be on next day\n  const civil_twilight_begin_minutes = parseMinutes(civil_twilight_begin)\n  const sunrise_minutes =\n    civil_twilight_begin_minutes +\n    parseMinutesBetween(civil_twilight_begin, sunrise)\n  const sunset_minutes =\n    civil_twilight_begin_minutes +\n    parseMinutesBetween(civil_twilight_begin, sunset)\n  const civil_twilight_end_minutes =\n    civil_twilight_begin_minutes +\n    parseMinutesBetween(civil_twilight_begin, civil_twilight_end)\n\n  return {\n    civil_twilight_begin_minutes,\n    sunrise_minutes,\n    sunset_minutes,\n    civil_twilight_end_minutes,\n  }\n  /* eslint-enable camelcase */\n}\n\n// eslint-disable-next-line react/prop-types\nfunction Gradient({ data, prevData }) {\n  const currObj = calcGradient(data)\n  const prevObj = calcGradient(prevData)\n\n  const [percent, setPercent] = React.useState(1)\n\n  /* eslint-disable camelcase */\n  const civil_twilight_begin_minutes = Math.round(\n    currObj.civil_twilight_begin_minutes -\n      (currObj.civil_twilight_begin_minutes -\n        prevObj.civil_twilight_begin_minutes) *\n        percent,\n  )\n  const sunrise_minutes = Math.round(\n    currObj.sunrise_minutes -\n      (currObj.sunrise_minutes - prevObj.sunrise_minutes) * percent,\n  )\n  const sunset_minutes = Math.round(\n    currObj.sunset_minutes -\n      (currObj.sunset_minutes - prevObj.sunset_minutes) * percent,\n  )\n  const civil_twilight_end_minutes = Math.round(\n    currObj.civil_twilight_end_minutes -\n      (currObj.civil_twilight_end_minutes -\n        prevObj.civil_twilight_end_minutes) *\n        percent,\n  )\n  /* eslint-enable camelcase */\n\n  const ANIMATION_LENGTH_MS = 700\n\n  const requestRef = useRef()\n  const previousTimeRef = useRef()\n  const startedTimeRef = useRef()\n\n  const callback = (deltaTime) => {\n    setPercent((prevPercent) =>\n      Math.max(0, prevPercent - deltaTime / ANIMATION_LENGTH_MS),\n    )\n  }\n\n  const animate = (time) => {\n    if (previousTimeRef.current !== undefined) {\n      const deltaTime = time - previousTimeRef.current\n      callback(deltaTime)\n    }\n    previousTimeRef.current = time\n    if (time - startedTimeRef.current < ANIMATION_LENGTH_MS) {\n      requestRef.current = requestAnimationFrame(animate)\n    }\n  }\n\n  useEffect(() => {\n    setPercent(1)\n    startedTimeRef.current = performance.now()\n    requestRef.current = requestAnimationFrame(animate)\n    return () => cancelAnimationFrame(requestRef.current)\n  }, [data, prevData])\n\n  return (\n    /* eslint-disable camelcase */\n    <div\n      className={styles.bar}\n      style={{\n        width: 1440,\n        background:\n          `linear-gradient(90deg, #1F0E4E ${civil_twilight_begin_minutes}px,` +\n          ` #00D0F0 ${sunrise_minutes}px,#00D0F0 ${sunset_minutes}px, #1F0E4E ${civil_twilight_end_minutes}px)`,\n      }}\n    />\n    /* eslint-enable camelcase */\n  )\n}\n\nfunction App() {\n  const [isLoading, setIsLoading] = useState(false)\n  const [data, setData] = useState({ results: {} })\n  const [error, setError] = useState('')\n  const [days, setDays] = useState(0)\n\n  const ref = useRef()\n\n  useEffect(() => {\n    ref.current = data\n    async function fetchData() {\n      if (!navigator.geolocation) {\n        setError('Geolocation is not supported by your browser')\n      } else {\n        setIsLoading(true)\n        try {\n          const {\n            coords: { latitude, longitude },\n          } = await getPositionPromise()\n          const fetcher = await fetch(\n            `${API_BASE}?lat=${encodeURIComponent(latitude)}` +\n              `&lng=${encodeURIComponent(longitude)}&date=${formatDayInterval(\n                days,\n              )}&formatted=0`,\n          )\n          const response = await fetcher.json()\n          const { status } = response\n          if (status === 'OK') {\n            setData(response)\n          } else {\n            setError(status)\n          }\n        } catch (exception) {\n          setError(exception.message)\n        } finally {\n          setIsLoading(false)\n        }\n      }\n    }\n    fetchData()\n  }, [days])\n\n  const {\n    // eslint-disable-next-line camelcase\n    results: { sunrise, sunset, day_length },\n  } = data\n\n  // Get the previous data (was passed into hook on last render)\n  const prevData = ref.current\n  return (\n    <div className={styles.app}>\n      {error ? (\n        <div>{error}</div>\n      ) : (\n        <div className={styles.pre}>\n          <div>\n            <p className={styles.header}>{displayDate(days)}</p>\n            <p>\n              <strong>Sunrise:</strong> {formatTime(sunrise)}\n              <br />\n              <strong>Sunset:</strong> {formatTime(sunset)}\n              <br />\n              <strong>Length:</strong> {formatInterval(day_length)}\n              <br />\n            </p>\n            <button\n              type=\"button\"\n              className={styles.button}\n              onClick={() => setDays((currDays) => currDays - 7)}\n            >\n              -7 days\n            </button>\n            <button\n              type=\"button\"\n              className={styles.button}\n              onClick={() => setDays((currDays) => currDays - 1)}\n            >\n              -1 day\n            </button>\n            <button\n              type=\"button\"\n              className={styles.button}\n              onClick={() => setDays((currDays) => currDays + 1)}\n            >\n              +1 day\n            </button>\n            <button\n              type=\"button\"\n              className={styles.button}\n              onClick={() => setDays((currDays) => currDays + 7)}\n            >\n              +7 days\n            </button>\n            <Gradient data={data} prevData={prevData} />\n            <p>{isLoading ? '⌛' : ''}</p>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}